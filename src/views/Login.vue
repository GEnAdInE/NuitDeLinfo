<template>
  <div>
    <form action="#" @submit.prevent="submit">
        <label for="email">Email</label>

          <input
            id="email"
            type="email"
            class="form-control"
            name="email"
            value
            required
            autofocus
            v-model="form.email"
          />

        <label for="password">Password</label>

          <input
            id="password"
            type="password"
            class="form-control"
            name="password"
            required
            v-model="form.password"
          />

      <button type="submit">Login</button>

    </form>
  </div>
</template>

<script lang="ts">
import { Options, Vue } from 'vue-class-component';
import { getAuth, signInWithEmailAndPassword } from 'firebase/auth';

interface Form{
  email:string,
  password:string,
}

@Options({
  name: 'Login',
  props: {},
  components: {},
})
export default class Login extends Vue {
  // ***********************************************************************************************
  // PROPS
  // -----------------------------------------------------------------------------------------------
  // -----------------------------------------------------------------------------------------------
  form : Form = {
    email: '',
    password: '',
  };

  error = ''

  // ***********************************************************************************************
  // VARIABLES
  // -----------------------------------------------------------------------------------------------
  // -----------------------------------------------------------------------------------------------

  // ***********************************************************************************************
  // FONCTIONS
  // -----------------------------------------------------------------------------------------------
  // -----------------------------------------------------------------------------------------------

  submit() {
    signInWithEmailAndPassword(getAuth(), this.form.email, this.form.password)
      .then(() => {
        this.$router.replace('/');
      })
      .catch((err) => {
        this.error = err.message;
      });
  }
}
</script>

<style lang="scss" scoped>
// ***********************************************************************************************
// KEYFRAMES
// -----------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------

// ***********************************************************************************************
// TAGS
// -----------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------

// ***********************************************************************************************
// CLASSES
// -----------------------------------------------------------------------------------------------
// -----------------------------------------------------------------------------------------------
</style>
